services:
  api:
    container_name: tea_api
    build: .
    ports:
      - "8080:3002" 
    environment:
      - DOPPLER_TOKEN=${DOPPLER_TOKEN}
    depends_on:
      - redis
    restart: unless-stopped
  redis: 
    image: redis:7-alpine
    container_name: tea_redis
    restart: unless-stopped

# Line 6 is the definition. Docker reads it and sets up the         
# forwarding automatically â€” no extra config needed anywhere. Whenever
# a request hits port 8080 on your Mac, Docker knows to forward it to
# port 3002 inside the container because of this line.